<!-- START SIGMA IMPORTS -->
<script src="../lib/sigma.min.js"></script>
<script src="../lib/sigma.layout.forceAtlas2.min.js"></script>
<script src="../lib/sigma.parsers.json.min.js"></script>
<!-- END SIGMA IMPORTS -->

<div id="container">
  <style>
    #network-graph {
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      position: absolute;
    }
  </style>
  <div id="network-graph"></div>
</div>

<script>
sigma.parsers.json(
  "/data/network.json",

  {container: 'network-graph',
  settings: {
    labelThreshold: 3
  }},

  function(s) { //This function is passed an instance of Sigma s
    //Add a click event handler to navigate to different transports
    s.bind('clickNode', function(e) {
      window.location.href = "http://google.com";
    });

    nodeCount = s.graph.nodes().length;
    forceTime = nodeCount * 50;

    //Initialize nodes as a circle before applying the force
    s.graph.nodes().forEach(function(node, i, a) {
      node.x = Math.cos(Math.PI * 2 * i / a.length);
      node.y = Math.sin(Math.PI * 2 * i / a.length);
    });

    s.startForceAtlas2();

    //Stop the force after forceTime ms ...
    setTimeout(function() {
      s.stopForceAtlas2();
    }, forceTime );
});
</script>
